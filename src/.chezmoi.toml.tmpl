{{ $choices := list "personal" "work" -}}
{{ $profile := promptChoiceOnce . "personal" "Which profile" $choices -}}

{{ $personal_email := "iammotivated@gmail.com" -}}
{{ $personal_github_user := "tomatau" -}}

{{- /* DEFAULTS */ -}}
{{ $email := $personal_email -}}
{{ $github_user := $personal_github_user -}}
{{ $code_path := "~/Code" }}
{{ $code_path_tom := print $code_path "/tomht" }}
{{ $xdg_config_home := "$HOME/.config" }}

{{- if eq $profile "personal" -}}
  {{ $code_path_tom = print $code_path "/tomatao" }}
{{- end -}}

{{- /* WORK OVERRIDES */ -}}
{{- if eq $profile "work" -}}
  {{ $email = promptStringOnce . "email" "Github email address" $personal_email -}}
  {{ $github_user = promptStringOnce . "github_user" "Github name" $personal_github_user -}}
{{- end -}}

{{- /* The sourceDir will be set by the `init` command */ -}}
sourceDir = "{{ .chezmoi.sourceDir }}"

[data]
profile = {{ $profile | quote }}
email = {{ $email | quote }}
code_path = {{ $code_path | quote }}
code_path_tom = {{ $code_path_tom | quote }}

[data.git]
name = "Thomas Hudspith-Tatham"
email = {{ $email | quote }}

[data.github]
user = {{ $github_user | quote }}
email = {{ $email | quote }}
key_name = {{ list "id_ed25519" $github_user "github" | join "_" | quote }}

[data.npm]
author = "Thomas `tomatao` Hudspith-Tatham"
email = {{ $email | quote }}

[data.lastpass]
username = "iammotivated@gmail.com"

[data.personal]
email = {{ $personal_email | quote }}
github_user = {{ $personal_github_user | quote }}
key_name = {{ list "id_ed25519" $personal_github_user "github" | join "_" | quote }}

[data.files]
xdg_config_home = {{ $xdg_config_home | quote }}
git_identities_base = {{ "$XDG_CONFIG_HOME/git-identities.base.yml" | quote }}
git_identities_local = {{ "$XDG_CONFIG_HOME/git-identities.local.yml" | quote }}

[diff]
pager = "delta"
