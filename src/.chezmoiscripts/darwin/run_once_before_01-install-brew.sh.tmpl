#!/usr/bin/env bash

source "{{ .chezmoi.sourceDir }}/dot_local/lib/shell/utils.sh"

set-strict-mode

p-header white "Starting brew install..."

# install homebrew if not installed
if ! command -v brew &> /dev/null; then
  p-header purple "Installing Homebrew..."
  # don't ask for user input
  NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
else
  p-header green "Homebrew already installed..."
fi

p-header white "Enable brew..."
# enable brew for subsequent scripts
eval "$(/opt/homebrew/bin/brew shellenv)"

p-header white "Updating brew..."
brew doctor
brew update
