#!/usr/bin/env bash

source "{{ .chezmoi.sourceDir }}/dot_local/lib/shell/utils.sh"
source "{{ .chezmoi.sourceDir }}/dot_local/lib/shell/setup-github-ssh.sh"

set-strict-mode

p-header white "Starting SSH key setup..."

{{ $ssh_dir := joinPath .chezmoi.homeDir ".ssh" -}}

p-header white "Setup default Github SSH..."

setup-github-ssh \
  {{ .github.email | quote }} \
  {{ $ssh_dir }} \
  {{ .github.key_name }}

{{- if eq .profile "work" }}
p-header white "Setup personal Github SSH..."

setup-github-ssh \
  {{ .personal.email | quote }} \
  {{ $ssh_dir }} \
  {{ .personal.key_name }}
{{- end }}
